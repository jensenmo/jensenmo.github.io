<!DOCTYPE html>
<html lang="en">

<head>
  <title>
  Customizing, Exporting, Importing and Templating AM Pool Configuration for ADF applications · Morten Jensen
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Morten Jensen">
<meta name="description" content="Warning: Please note that the following steps are not explicitly documented in the Oracle documentation. As such it&rsquo;s not known for sure whether this is the way to customize and template bc4j.xcfg (AM Pool) configuration - or whether there are simpler or better supported ways to do this.

  Background
  
    
    Link to heading
  

Each (root) AM Pool has an associated configuration pertaining to number of AM instances allowed, life time, passivation timeouts etc. This configuration is typically stored in bc4j.xcfg files, which are generally generated by developers (sometimes unbeknownst to them) and littered throughout the EAR file - if the EAR file is modularised using JAR files for the BC4J components then the bc4j.xcfg files are located inside the JAR files, which are inside the EAR file. This does not make customization of the AM pool configuration very attractive from an operations perspective. In our case there are 6 root AM pools and their default settings quickly blow the size of the JDBC connection pool that is provided to the application, which results in application errors.">
<meta name="keywords" content="Customizing,, Exporting,, Importing, Templating, Pool, Configuration, applications">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Customizing, Exporting, Importing and Templating AM Pool Configuration for ADF applications">
  <meta name="twitter:description" content="Warning: Please note that the following steps are not explicitly documented in the Oracle documentation. As such it’s not known for sure whether this is the way to customize and template bc4j.xcfg (AM Pool) configuration - or whether there are simpler or better supported ways to do this.
Background Link to heading Each (root) AM Pool has an associated configuration pertaining to number of AM instances allowed, life time, passivation timeouts etc. This configuration is typically stored in bc4j.xcfg files, which are generally generated by developers (sometimes unbeknownst to them) and littered throughout the EAR file - if the EAR file is modularised using JAR files for the BC4J components then the bc4j.xcfg files are located inside the JAR files, which are inside the EAR file. This does not make customization of the AM pool configuration very attractive from an operations perspective. In our case there are 6 root AM pools and their default settings quickly blow the size of the JDBC connection pool that is provided to the application, which results in application errors.">

<meta property="og:url" content="https://jensenmo.github.io/posts/customizing-exporting-importing-and-templating-am-pool-configuration-for-adf-applications/">
  <meta property="og:site_name" content="Morten Jensen">
  <meta property="og:title" content="Customizing, Exporting, Importing and Templating AM Pool Configuration for ADF applications">
  <meta property="og:description" content="Warning: Please note that the following steps are not explicitly documented in the Oracle documentation. As such it’s not known for sure whether this is the way to customize and template bc4j.xcfg (AM Pool) configuration - or whether there are simpler or better supported ways to do this.
Background Link to heading Each (root) AM Pool has an associated configuration pertaining to number of AM instances allowed, life time, passivation timeouts etc. This configuration is typically stored in bc4j.xcfg files, which are generally generated by developers (sometimes unbeknownst to them) and littered throughout the EAR file - if the EAR file is modularised using JAR files for the BC4J components then the bc4j.xcfg files are located inside the JAR files, which are inside the EAR file. This does not make customization of the AM pool configuration very attractive from an operations perspective. In our case there are 6 root AM pools and their default settings quickly blow the size of the JDBC connection pool that is provided to the application, which results in application errors.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2013-09-12T14:56:00+01:00">
    <meta property="article:modified_time" content="2013-09-12T14:56:00+01:00">




<link rel="canonical" href="https://jensenmo.github.io/posts/customizing-exporting-importing-and-templating-am-pool-configuration-for-adf-applications/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.min.4b392a85107b91dbdabc528edf014a6ab1a30cd44cafcd5325c8efe796794fca.css" integrity="sha256-SzkqhRB7kdvavFKO3wFKarGjDNRMr81TJcjv55Z5T8o=" crossorigin="anonymous" media="screen" />








 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>




<body class="preload-transitions colorscheme-light">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="https://jensenmo.github.io/">
      Morten Jensen
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">About</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="https://jensenmo.github.io/posts/customizing-exporting-importing-and-templating-am-pool-configuration-for-adf-applications/">
              Customizing, Exporting, Importing and Templating AM Pool Configuration for ADF applications
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2013-09-12T14:56:00&#43;01:00">
                September 12, 2013
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              7-minute read
            </span>
          </div>
          
          
          
        </div>
      </header>

      <div class="post-content">
        
        <p><strong>Warning:</strong> Please note that the following steps are not explicitly documented in the Oracle documentation. As such it&rsquo;s not known for sure whether this is <strong>the</strong> way to customize and template <code>bc4j.xcfg</code> (AM Pool) configuration - or whether there are simpler or better supported ways to do this.</p>
<h2 id="background">
  Background
  <a class="heading-link" href="#background">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Each (root) AM Pool has an associated configuration pertaining to number of AM instances allowed, life time, passivation timeouts etc. This configuration is typically stored in <code>bc4j.xcfg</code> files, which are generally generated by developers (sometimes unbeknownst to them) and littered throughout the EAR file - if the EAR file is modularised using JAR files for the BC4J components then the <code>bc4j.xcfg</code> files are located inside the JAR files, which are inside the EAR file. This does not make customization of the AM pool configuration very attractive from an operations perspective. In our case there are 6 root AM pools and their default settings quickly blow the size of the JDBC connection pool that is provided to the application, which results in application errors.</p>
<p>So, it is necessary to customize the settings in such a way that the JDBC connection pool is not exhausted - and that during peak periods the AM instances are passivated to the database and JDBC connections recycled instead. After all, the overhead of passivation would be preferable to users getting spurious JDBC errors pertaining to the inability to get a JDBC connection from the connection pool.</p>
<p>The Java system properties can be used to control some of these settings - but are overridden by the presence of <code>bc4j.xcfg</code> files for a given root AM pool. Also, the system parameters cannot be set on an individual root AM pool basis - and so, are simply not granular enough. E.g. some root AM pools are shared to cache static application configuration and don&rsquo;t need 10&rsquo;s or 1000&rsquo;s of (some times pre-allocated) instances - this also wastes JVM heap space. Other root AM pools do. The default upper bound for a root AM pool is 4096 instances - so with 6 root AM pools we&rsquo;re looking at a theoretical max of 24576 instances - all of which (when used) require a JDBC connection in our case, which could be persisted (AM instance to JDBC connection affinity). The database and hardware simply cannot sanely support that number of JDBC connections - and frankly it doesn&rsquo;t make sense (think concurrently active database sessions versus CPU cores or SMT threads or Hyperthreading or whatever).</p>
<p>In our case we have multiple application environments (dev, test, UAT etc) and want to be able to customize the 6 root AM pools. This can be achieved - but as stated previously, isn&rsquo;t documented explicitly by Oracle anywhere.</p>
<h2 id="using-enterprise-manager-to-customize-am-pools">
  Using Enterprise Manager to Customize AM Pools
  <a class="heading-link" href="#using-enterprise-manager-to-customize-am-pools">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>When <code>bc4j.xcfg</code> configuration for root AM pools need to be customized in a given environment, the Enterprise Manager Fusion Middleware Control can be used for this - assuming that an MDS store (file or database-based) has been set-up and the underlying store (directory or JNDI-based data source) has been correctly set-up. Simply login to <code>/em</code> of the WebLogic server, Navigate to: <code>Farm_ -&gt; Application Deployments -&gt; &lt;app&gt;</code>, right-click on <code>&lt;app&gt;</code> and choose: <code>ADF -&gt; Configure ADF Business Components</code>. Any customizations (parameter changes) are stored in the MDS repository as XML files - more about this later.</p>
<p>The caveat here is that ADF Business Components Configuration page lists all AM pools - not just the root pools. I have found no easy way to filter this to just root AM pools. In our case the application has nearly 60 AM pools - and so the list is rather unwieldy. Furthermore, it is not clearly identified which AM pools are root. I have found no simple, deterministic way of identifying the pools inside the EAR file - except for running the application and using the <code>/dms/Spy</code> application to determine the pools.</p>
<h2 id="identifying-root-am-pools">
  Identifying Root AM Pools
  <a class="heading-link" href="#identifying-root-am-pools">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>To list the root AM Pools navigate to WebLogic using <code>http://&lt;host&gt;:&lt;port&gt;/dms/Spy</code> - login as the weblogic user.</p>
<p>In the Metric Tables find and click on <code>ampool</code>. Statistics concerning the root AM Pools (that have been initialized) will appear. Use this list to determine what pools to customise in the EM ADF Business Components Configuration page. As will quickly become obvious this is a very laborious effort that needs to be repeated for each deployment of the application - and so really needs to be automated with a set of <code>bc4j.xcfg</code>-based templates, if you will.</p>
<h2 id="using-wlst-to-export-and-import-configuration">
  Using WLST to Export and Import Configuration
  <a class="heading-link" href="#using-wlst-to-export-and-import-configuration">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p><a href="http://docs.oracle.com/cd/E21764_01/web.1111/e13813/custom_mds.htm"  class="external-link" target="_blank" rel="noopener">The wlst script and metadata repository commands to the rescue</a>&hellip; Note that not all <code>wlst.(sh|cmd)</code> scripts are created equal in terms of JAR files and class paths. The examples below I run in <code>wlst.sh</code> from a SOA Suite installation - we&rsquo;re also using SOA Suite - in order to ensure that commands like <code>exportMetadata</code>, <code>importMetadata</code>, <code>getMDSArchiveConfig</code> and <code>setAppMetadataRepository</code> exist. The location of the <code>wlst.sh</code> script in the SOA Suite that contains the right set of JAR files and class paths is: <code>/u01/app/oracle/Middleware/&lt;SOA Suite Oracle Home&gt;/common/bin/wlst.sh</code>. Be advised that as long as you got the right <code>wlst.sh</code> for the job somewhere on your LAN with access to your ADF application environments you don&rsquo;t need to go off and install SOA Suite everywhere (also mind licensing!) - you can connect remotely to WebLogic and run the repository commands - using the &ldquo;remote&rdquo; option for commands involving files - the files must then exist on the host from which you run wlst.</p>
<h3 id="process-overview">
  Process Overview
  <a class="heading-link" href="#process-overview">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>The process to be able to export/import the configuration across environments is:</p>
<ol>
<li>Use the ADF Business Components Configuration page in one environment (say, development) to customize the root AM pools</li>
<li>Export the <code>bc4j.xcfg</code> metadata from the environment (say, development)</li>
<li>Import the <code>bc4j.xcfg</code> metadata into another environment (say, test)</li>
</ol>
<h3 id="connecting-to-weblogic">
  Connecting to WebLogic
  <a class="heading-link" href="#connecting-to-weblogic">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Once wlst is started, connect to the AdminServer of the development environment:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>connect(<span style="color:#e6db74">&#34;weblogic&#34;</span>, <span style="color:#e6db74">&#34;password&#34;</span>, <span style="color:#e6db74">&#34;t3://dev:7001&#34;</span>)
</span></span></code></pre></div><p>If, at this stage, you were to run an unqualified (default: <code>&quot;/**&quot;</code>) export using the command below you would export all ADF customizations stored in the MDS - which is likely not what you want - worse, you wouldn&rsquo;t be exporting the <code>bc4j.xcfg</code> configuration that you are really after. For some strange reason these xml files are not included per default.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>exportMetadata(application<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&lt;app&gt;&#34;</span>, server<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&lt;server&gt;&#34;</span>, toLocation<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/tmp/development_mds_settings.mds&#34;</span>, remote<span style="color:#f92672">=</span>true, docs<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/**&#34;</span>)
</span></span></code></pre></div><h3 id="identifying-configuration-files-to-export">
  Identifying Configuration Files to Export
  <a class="heading-link" href="#identifying-configuration-files-to-export">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>So, the question is then how to identify what xml files to export and how to export them explicitly. This required a bit of investigation and in the end I found that the easiest way was (in my case) to connect to the database containing the MDS repository and run:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">distinct</span> path_fullname
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> _mds.mds_paths
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> <span style="color:#66d9ef">lower</span>(path_fullname) <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;%bc4j%&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">and</span> path_partition_id <span style="color:#f92672">=</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">distinct</span> PARTITION_ID
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">from</span> _mds.mds_partitions
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">where</span> PARTITION_NAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&lt;partition_name&gt;&#39;</span>
</span></span><span style="display:flex;"><span>  );
</span></span></code></pre></div><p>Example output:</p>
<pre tabindex="0"><code>/xx/xxx/xxxxx/xxxx/common/service/common/mdssys/cust/adfshare/adfshare/bc4j.xcfg.xml
/xx/xxx/xxxxx/xxxx/xxxx/model/service/common/mdssys/cust/adfshare/adfshare/bc4j.xcfg.xml
/xx/xxx/xxxxx/xxxx/xxxxxxxx/service/common/mdssys/cust/adfshare/adfshare/bc4j.xcfg.xml
/xx/xxx/xxxxx/xxxx/xxxxx/service/common/mdssys/cust/adfshare/adfshare/bc4j.xcfg.xml
/xx/xxx/xxxxx/xxxx/xxxxx/xxxx/model/service/common/mdssys/cust/adfshare/adfshare/bc4j.xcfg.xml
/xx/xxx/xxxxx/xxxx/xxxxx/model/service/common/mdssys/cust/adfshare/adfshare/bc4j.xcfg.xml
</code></pre><p>The X&rsquo;es simply mask the real names. You will need to provide the correct partition name for this (a list of them exist in <code>_mds.mds_partitions</code>).</p>
<h3 id="exporting-configuration">
  Exporting Configuration
  <a class="heading-link" href="#exporting-configuration">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Now, to export the configuration for all these files in a single file do the following (comma-separated list of xml files):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>exportMetadata(application<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&lt;app&gt;&#34;</span>, server<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&lt;server&gt;&#34;</span>, toLocation<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/tmp/development_mds_settings.mds&#34;</span>, remote<span style="color:#f92672">=</span>true,
</span></span><span style="display:flex;"><span>docs<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/xx/xxx/xxxxx/xxxx/common/service/common/mdssys/cust/adfshare/adfshare/bc4j.xcfg.xml,</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>xx<span style="color:#f92672">/</span>xxx<span style="color:#f92672">/</span>xxxxx<span style="color:#f92672">/</span>xxxx<span style="color:#f92672">/</span>xxxx<span style="color:#f92672">/</span>model<span style="color:#f92672">/</span>service<span style="color:#f92672">/</span>common<span style="color:#f92672">/</span>mdssys<span style="color:#f92672">/</span>cust<span style="color:#f92672">/</span>adfshare<span style="color:#f92672">/</span>adfshare<span style="color:#f92672">/</span>bc4j<span style="color:#f92672">.</span>xcfg<span style="color:#f92672">.</span>xml,
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>xx<span style="color:#f92672">/</span>xxx<span style="color:#f92672">/</span>xxxxx<span style="color:#f92672">/</span>xxxx<span style="color:#f92672">/</span>xxxxxxxx<span style="color:#f92672">/</span>service<span style="color:#f92672">/</span>common<span style="color:#f92672">/</span>mdssys<span style="color:#f92672">/</span>cust<span style="color:#f92672">/</span>adfshare<span style="color:#f92672">/</span>adfshare<span style="color:#f92672">/</span>bc4j<span style="color:#f92672">.</span>xcfg<span style="color:#f92672">.</span>xml,
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>xx<span style="color:#f92672">/</span>xxx<span style="color:#f92672">/</span>xxxxx<span style="color:#f92672">/</span>xxxx<span style="color:#f92672">/</span>xxxxx<span style="color:#f92672">/</span>service<span style="color:#f92672">/</span>common<span style="color:#f92672">/</span>mdssys<span style="color:#f92672">/</span>cust<span style="color:#f92672">/</span>adfshare<span style="color:#f92672">/</span>adfshare<span style="color:#f92672">/</span>bc4j<span style="color:#f92672">.</span>xcfg<span style="color:#f92672">.</span>xml,
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>xx<span style="color:#f92672">/</span>xxx<span style="color:#f92672">/</span>xxxxx<span style="color:#f92672">/</span>xxxx<span style="color:#f92672">/</span>xxxxx<span style="color:#f92672">/</span>xxxx<span style="color:#f92672">/</span>model<span style="color:#f92672">/</span>service<span style="color:#f92672">/</span>common<span style="color:#f92672">/</span>mdssys<span style="color:#f92672">/</span>cust<span style="color:#f92672">/</span>adfshare<span style="color:#f92672">/</span>adfshare<span style="color:#f92672">/</span>bc4j<span style="color:#f92672">.</span>xcfg<span style="color:#f92672">.</span>xml,
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>xx<span style="color:#f92672">/</span>xxx<span style="color:#f92672">/</span>xxxxx<span style="color:#f92672">/</span>xxxx<span style="color:#f92672">/</span>xxxxx<span style="color:#f92672">/</span>model<span style="color:#f92672">/</span>service<span style="color:#f92672">/</span>common<span style="color:#f92672">/</span>mdssys<span style="color:#f92672">/</span>cust<span style="color:#f92672">/</span>adfshare<span style="color:#f92672">/</span>adfshare<span style="color:#f92672">/</span>bc4j<span style="color:#f92672">.</span>xcfg<span style="color:#f92672">.</span>xml<span style="color:#e6db74">&#34;)</span>
</span></span></code></pre></div><p>Output:</p>
<pre tabindex="0"><code>Executing operation: exportMetadata.
Metadata transfer operation started
Exporting metadata from repository . . . . .
Metadata transfer operation completed

Operation &#34;exportMetadata&#34; completed. Summary of &#34;exportMetadata&#34; operation is:
6 documents successfully transferred.
List of documents successfully transferred:

/xx/xxx/xxxxx/xxxx/common/service/common/mdssys/cust/adfshare/adfshare/bc4j.xcfg.xml
/xx/xxx/xxxxx/xxxx/xxxx/model/service/common/mdssys/cust/adfshare/adfshare/bc4j.xcfg.xml
/xx/xxx/xxxxx/xxxx/xxxxxxxx/service/common/mdssys/cust/adfshare/adfshare/bc4j.xcfg.xml
/xx/xxx/xxxxx/xxxx/xxxxx/service/common/mdssys/cust/adfshare/adfshare/bc4j.xcfg.xml
/xx/xxx/xxxxx/xxxx/xxxxx/xxxx/model/service/common/mdssys/cust/adfshare/adfshare/bc4j.xcfg.xml
/xx/xxx/xxxxx/xxxx/xxxxx/model/service/common/mdssys/cust/adfshare/adfshare/bc4j.xcfg.xml
</code></pre><h3 id="importing-configuration">
  Importing Configuration
  <a class="heading-link" href="#importing-configuration">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Exit wlst, rerun wlst and then connect to the test environment and issue:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>importMetadata(application<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&lt;app&gt;&#34;</span>, server<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&lt;server&gt;&#34;</span>, fromLocation<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/tmp/development_mds_settings.mds&#34;</span>, remote<span style="color:#f92672">=</span>true,
</span></span><span style="display:flex;"><span>docs<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/xx/xxx/xxxxx/xxxx/common/service/common/mdssys/cust/adfshare/adfshare/bc4j.xcfg.xml,</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>xx<span style="color:#f92672">/</span>xxx<span style="color:#f92672">/</span>xxxxx<span style="color:#f92672">/</span>xxxx<span style="color:#f92672">/</span>xxxx<span style="color:#f92672">/</span>model<span style="color:#f92672">/</span>service<span style="color:#f92672">/</span>common<span style="color:#f92672">/</span>mdssys<span style="color:#f92672">/</span>cust<span style="color:#f92672">/</span>adfshare<span style="color:#f92672">/</span>adfshare<span style="color:#f92672">/</span>bc4j<span style="color:#f92672">.</span>xcfg<span style="color:#f92672">.</span>xml,
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>xx<span style="color:#f92672">/</span>xxx<span style="color:#f92672">/</span>xxxxx<span style="color:#f92672">/</span>xxxx<span style="color:#f92672">/</span>xxxxxxxx<span style="color:#f92672">/</span>service<span style="color:#f92672">/</span>common<span style="color:#f92672">/</span>mdssys<span style="color:#f92672">/</span>cust<span style="color:#f92672">/</span>adfshare<span style="color:#f92672">/</span>adfshare<span style="color:#f92672">/</span>bc4j<span style="color:#f92672">.</span>xcfg<span style="color:#f92672">.</span>xml,
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>xx<span style="color:#f92672">/</span>xxx<span style="color:#f92672">/</span>xxxxx<span style="color:#f92672">/</span>xxxx<span style="color:#f92672">/</span>xxxxx<span style="color:#f92672">/</span>service<span style="color:#f92672">/</span>common<span style="color:#f92672">/</span>mdssys<span style="color:#f92672">/</span>cust<span style="color:#f92672">/</span>adfshare<span style="color:#f92672">/</span>adfshare<span style="color:#f92672">/</span>bc4j<span style="color:#f92672">.</span>xcfg<span style="color:#f92672">.</span>xml,
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>xx<span style="color:#f92672">/</span>xxx<span style="color:#f92672">/</span>xxxxx<span style="color:#f92672">/</span>xxxx<span style="color:#f92672">/</span>xxxxx<span style="color:#f92672">/</span>xxxx<span style="color:#f92672">/</span>model<span style="color:#f92672">/</span>service<span style="color:#f92672">/</span>common<span style="color:#f92672">/</span>mdssys<span style="color:#f92672">/</span>cust<span style="color:#f92672">/</span>adfshare<span style="color:#f92672">/</span>adfshare<span style="color:#f92672">/</span>bc4j<span style="color:#f92672">.</span>xcfg<span style="color:#f92672">.</span>xml,
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>xx<span style="color:#f92672">/</span>xxx<span style="color:#f92672">/</span>xxxxx<span style="color:#f92672">/</span>xxxx<span style="color:#f92672">/</span>xxxxx<span style="color:#f92672">/</span>model<span style="color:#f92672">/</span>service<span style="color:#f92672">/</span>common<span style="color:#f92672">/</span>mdssys<span style="color:#f92672">/</span>cust<span style="color:#f92672">/</span>adfshare<span style="color:#f92672">/</span>adfshare<span style="color:#f92672">/</span>bc4j<span style="color:#f92672">.</span>xcfg<span style="color:#f92672">.</span>xml<span style="color:#e6db74">&#34;)</span>
</span></span></code></pre></div><p>Output:</p>
<pre tabindex="0"><code>Executing operation: importMetadata.
Metadata transfer operation started
Importing metadata into repository . . . . . . .
Metadata transfer operation completed

Operation &#34;importMetadata&#34; completed. Summary of &#34;importMetadata&#34; operation is:
6 documents successfully transferred.
List of documents successfully transferred:

/xx/xxx/xxxxx/xxxx/common/service/common/mdssys/cust/adfshare/adfshare/bc4j.xcfg.xml
/xx/xxx/xxxxx/xxxx/xxxx/model/service/common/mdssys/cust/adfshare/adfshare/bc4j.xcfg.xml
/xx/xxx/xxxxx/xxxx/xxxxxxxx/service/common/mdssys/cust/adfshare/adfshare/bc4j.xcfg.xml
/xx/xxx/xxxxx/xxxx/xxxxx/service/common/mdssys/cust/adfshare/adfshare/bc4j.xcfg.xml
/xx/xxx/xxxxx/xxxx/xxxxx/xxxx/model/service/common/mdssys/cust/adfshare/adfshare/bc4j.xcfg.xml
/xx/xxx/xxxxx/xxxx/xxxxx/model/service/common/mdssys/cust/adfshare/adfshare/bc4j.xcfg.xml
</code></pre><h2 id="taking-snapshots-of-configuration">
  Taking Snapshots of Configuration
  <a class="heading-link" href="#taking-snapshots-of-configuration">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Btw. it may at times be a good idea to take a snapshot of the (customized) settings. This could be achieved by querying the table <code>_mds.mds_attributes</code> from SQLPLUS using e.g.:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> _mds.mds_attributes
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> att_contentid <span style="color:#66d9ef">in</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">select</span> path_contentid
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">from</span> _mds.mds_paths
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">where</span> <span style="color:#66d9ef">lower</span>(path_fullname) <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;%bc4j%&#39;</span>
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">and</span> att_partition_id <span style="color:#f92672">=</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">distinct</span> PARTITION_ID
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">from</span> _mds.mds_partitions
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">where</span> PARTITION_NAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&lt;partition_name&gt;&#39;</span>
</span></span><span style="display:flex;"><span>  );
</span></span></code></pre></div><p>However, this is not particularly readable - instead the XML can be generated using an internal MDS function for this (output using <code>DBMS_OUTPUT</code> so make sure server output is enabled):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">set</span> serveroutput <span style="color:#66d9ef">on</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">begin</span>
</span></span><span style="display:flex;"><span>  _mds.mds_internal_utils.printDocument(<span style="color:#e6db74">&#39;&lt;partition_name&gt;&#39;</span>, <span style="color:#e6db74">&#39;/xx/xxx/xxxxx/xxxx/common/service/common/mdssys/cust/adfshare/adfshare/bc4j.xcfg.xml&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>
</span></span></code></pre></div><p>Output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version = &#39;1.0&#39; encoding = &#39;UTF-8&#39;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;bc4j-config</span> <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://xmlns.oracle.com/bc4j/configuration&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">&lt;AppModuleConfigBag&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;AppModuleConfig</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;SharedLocal&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">&lt;AM-Pooling</span> <span style="color:#a6e22e">jbo.ampool.maxpoolsize=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">jbo.ampool.initpoolsize=</span><span style="color:#e6db74">&#34;0&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/AppModuleConfig&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">&lt;/AppModuleConfigBag&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/bc4j-config&gt;</span>
</span></span></code></pre></div><hr>
<p><em>Originally published at <a href="https://jensenmo.blogspot.com/2013/09/customizing-importing-exporting-am-pool.html"  class="external-link" target="_blank" rel="noopener">https://jensenmo.blogspot.com/2013/09/customizing-importing-exporting-am-pool.html</a></em></p>

      </div>


      <footer>
        


        
        
        
        
        
        
        
      </footer>
    </article>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css"
    integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">
  
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js"
    integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js"
    integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
    onload="renderMathInElement(document.body,
      {
        delimiters: [
          {left: '$$', right: '$$', display:true},
          {left: '$', right: '$', display:false},
          {left: '\\(', right: '\\)', display: false},
          {left: '\\[', right: '\\]', display: true}
        ]
      }
    );"></script>
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
    2025
     Morten Jensen 
    ·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js" integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
  

  

  


  

  

  <script async defer data-domain="jensenmo.github.io" src="https://plausible.io/js/script.js"></script>


  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>
</html>
