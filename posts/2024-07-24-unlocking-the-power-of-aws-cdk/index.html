<!DOCTYPE html>
<html lang="en">

<head>
  <title>
  Unlocking the Power of AWS CDK: Why It&#39;s Our Default Infrastructure as Code Tool · Morten Jensen
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Morten Jensen">
<meta name="description" content="

  Background
  
    
    Link to heading
  

At Virtuability, we&rsquo;re always on the lookout for tools that can enhance our AWS consulting services and deliver maximum value to our customers.
Over the past number of years, when it comes to Infrastructure as Code (IaC), we&rsquo;ve found that the AWS Cloud Development Kit (CDK) increases productivity considerably and allows us build-in governance and support guardrails from the onset of stack development, for both Landing Zone components and App stacks alike.">
<meta name="keywords" content="AWS, Governance, Guardrails, Organizations, CDK, Cloud Development Kit, Productivity, Landing Zone">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Unlocking the Power of AWS CDK: Why It&#39;s Our Default Infrastructure as Code Tool">
  <meta name="twitter:description" content="Background Link to heading At Virtuability, we’re always on the lookout for tools that can enhance our AWS consulting services and deliver maximum value to our customers.
Over the past number of years, when it comes to Infrastructure as Code (IaC), we’ve found that the AWS Cloud Development Kit (CDK) increases productivity considerably and allows us build-in governance and support guardrails from the onset of stack development, for both Landing Zone components and App stacks alike.">

<meta property="og:url" content="https://jensenmo.github.io/posts/2024-07-24-unlocking-the-power-of-aws-cdk/">
  <meta property="og:site_name" content="Morten Jensen">
  <meta property="og:title" content="Unlocking the Power of AWS CDK: Why It&#39;s Our Default Infrastructure as Code Tool">
  <meta property="og:description" content="Background Link to heading At Virtuability, we’re always on the lookout for tools that can enhance our AWS consulting services and deliver maximum value to our customers.
Over the past number of years, when it comes to Infrastructure as Code (IaC), we’ve found that the AWS Cloud Development Kit (CDK) increases productivity considerably and allows us build-in governance and support guardrails from the onset of stack development, for both Landing Zone components and App stacks alike.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-23T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-07-23T00:00:00+00:00">




<link rel="canonical" href="https://jensenmo.github.io/posts/2024-07-24-unlocking-the-power-of-aws-cdk/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.min.4b392a85107b91dbdabc528edf014a6ab1a30cd44cafcd5325c8efe796794fca.css" integrity="sha256-SzkqhRB7kdvavFKO3wFKarGjDNRMr81TJcjv55Z5T8o=" crossorigin="anonymous" media="screen" />








 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>




<body class="preload-transitions colorscheme-light">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="https://jensenmo.github.io/">
      Morten Jensen
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">About</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="https://jensenmo.github.io/posts/2024-07-24-unlocking-the-power-of-aws-cdk/">
              Unlocking the Power of AWS CDK: Why It&#39;s Our Default Infrastructure as Code Tool
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2024-07-23T00:00:00Z">
                July 23, 2024
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              7-minute read
            </span>
          </div>
          
          
          
        </div>
      </header>

      <div class="post-content">
        
        <p><img src="images/5f26d9ac-ce02-4e57-a251-5485f6b8c991.jpeg" alt="Querying CloudTrail Logs in an AWS Organization with Athena"></p>
<h2 id="background">
  Background
  <a class="heading-link" href="#background">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>At Virtuability, we&rsquo;re always on the lookout for tools that can enhance our AWS consulting services and deliver maximum value to our customers.</p>
<p>Over the past number of years, when it comes to Infrastructure as Code (IaC), we&rsquo;ve found that the AWS Cloud Development Kit (CDK) increases productivity considerably and allows us build-in governance and support guardrails from the onset of stack development, for both Landing Zone components and App stacks alike.</p>
<p>Here&rsquo;s why we believe that the CDK, which is underpinned by CloudFormation, is a great choice for managing AWS infrastructure.</p>
<h2 id="native-aws-integration">
  Native AWS Integration
  <a class="heading-link" href="#native-aws-integration">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>The AWS CDK is built for AWS, offering seamless integration with the AWS ecosystem. The native compatibility with Cloudformation ensures that you&rsquo;re working with the majority of AWS features and services.</p>
<h2 id="open-source">
  Open Source
  <a class="heading-link" href="#open-source">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>The <a href="https://github.com/aws/aws-cdk?tab=Apache-2.0-1-ov-file#readme"  class="external-link" target="_blank" rel="noopener">AWS CDK is an open source development framework</a> with a large, active community of volunteers.</p>
<h2 id="extensibility--third-party-constructs">
  Extensibility &amp; Third-Party constructs
  <a class="heading-link" href="#extensibility--third-party-constructs">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>There&rsquo;s a large, public <a href="https://constructs.dev/"  class="external-link" target="_blank" rel="noopener">Construct Hub</a>, which provides many third-party constructs including from large software vendors, which helps to integrate vendor services with relative ease to AWS environments.</p>
<h2 id="the-power-of-programming-languages">
  The Power of Programming Languages
  <a class="heading-link" href="#the-power-of-programming-languages">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Unlike other IaC tools that use domain-specific languages, CDK allows you to define your infrastructure using familiar programming languages like TypeScript, Python, Java etc. This approach leverages your existing development skills, making it easier to create complex, dynamic infrastructure definitions.</p>
<p>Bringing the power of imperative development on top of a declarative deployment mechanism makes conditional logic and configuration much simpler to handle.</p>
<h2 id="multi-region-and-multi-account-deployments">
  Multi-Region and Multi-Account Deployments
  <a class="heading-link" href="#multi-region-and-multi-account-deployments">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>CDK excels at managing multi-region and multi-account deployments. You can easily define stacks that deploy resources across different regions or accounts, all from a single CDK application. This capability is crucial for organisations with complex, distributed architectures or those adhering to AWS&rsquo;s well-architected framework.</p>
<p>The added benefit is that when using Cloudformation there is no need for complex handling of cross-stack state.</p>
<h2 id="enhanced-security-with-custom-bootstraps">
  Enhanced Security with Custom Bootstraps
  <a class="heading-link" href="#enhanced-security-with-custom-bootstraps">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>The CDK&rsquo;s bootstrap process can be customized and hardened, allowing you to implement strict security controls. For instance, you can deploy the bootstrap as a stack set across accounts and regions in your AWS Organization, ensuring consistent security measures across all accounts.</p>
<p>You can also create multiple bootstraps for different roles, providing fine-grained access control. For example Platform and DevOps engineers can use a more permissive bootstrap with a distinct CDK qualifier while App developers use a more restricted bootstrap.</p>
<p>In addition, IAM roles and policies can be namespaced to provide separation between for instance Landing Zone concerns and App concerns.</p>
<h3 id="deployment-role-permission-boundaries">
  Deployment Role Permission Boundaries
  <a class="heading-link" href="#deployment-role-permission-boundaries">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>The CDK allows you to set IAM permission boundaries on deployment roles, limiting the scope of actions that can be performed during deployments. This additional layer of security helps prevent unintended permissions while offering flexibility to the principle of least privilege.</p>
<p>We find that using IAM permission boundaries in conjunction with Aspects (<a href="https://aws.amazon.com/blogs/devops/secure-cdk-deployments-with-iam-permission-boundaries/"  class="external-link" target="_blank" rel="noopener">instead of hardcoding in  <code>cdk.json</code></a>) provides a very flexible approach to managing attachment multiple permission boundaries.</p>
<h2 id="streamlined-cicd-integration">
  Streamlined CI/CD Integration
  <a class="heading-link" href="#streamlined-cicd-integration">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>The CDK integrates beautifully with CI/CD pipelines. Whether you&rsquo;re using CDK Pipelines or third-party tools like GitHub Actions, you can automate your infrastructure deployments without exposing sensitive permissions directly to users. The deployment role, which can only be used by CloudFormation, adds an extra layer of security to your CI/CD process.</p>
<h2 id="flexibility-with-aspects--escape-hatches">
  Flexibility with Aspects &amp; Escape Hatches
  <a class="heading-link" href="#flexibility-with-aspects--escape-hatches">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>The CDK&rsquo;s Aspects provide powerful mechanisms for applying changes across your entire infrastructure stack. These features allow you to implement cross-cutting concerns, such as adding permission boundaries to roles, enforcing specific security groups etc., with minimal effort.</p>
<p>For instance, <a href="https://github.com/cdklabs/cdk-nag"  class="external-link" target="_blank" rel="noopener"><code>cdk-nag</code> also uses Aspects</a>.</p>
<p>While the CDK abstracts away much of the complexity of CloudFormation, it also provides <a href="https://docs.aws.amazon.com/cdk/v2/guide/cfn_layer.html"  class="external-link" target="_blank" rel="noopener">escape hatches</a> that allow you to override CDK construct Properties or even drop down to setting Properties in raw CloudFormation, when needed. This flexibility ensures that you&rsquo;re not limited by the CDK&rsquo;s abstractions and can implement advanced or custom configurations.</p>
<h2 id="reusable-components-with-constructs">
  Reusable Components with Constructs
  <a class="heading-link" href="#reusable-components-with-constructs">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>The CDK&rsquo;s concept of Constructs allows you to create reusable components that encapsulate both infrastructure and logic. This promotes code reuse, reduces duplication and allows you to build a library of best-practice implementations that can be shared across projects and teams.</p>
<h2 id="automatic-dependency-management">
  Automatic Dependency Management
  <a class="heading-link" href="#automatic-dependency-management">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>The CDK automatically manages dependencies between resources, reducing the likelihood of deployment errors due to incorrect resource ordering. This feature significantly simplifies the process of creating complex, interconnected infrastructure.</p>
<h2 id="unit-testing">
  Unit Testing
  <a class="heading-link" href="#unit-testing">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Support for unit testing in AWS CDK apps comes <a href="https://docs.aws.amazon.com/cdk/v2/guide/testing.html"  class="external-link" target="_blank" rel="noopener">out-of-the-box</a>.</p>
<p>AWS CDK unit testing offers numerous advantages for developers working with infrastructure as code. By implementing unit tests for CDK constructs and stacks, teams can catch errors early in the development process, improve code quality and reduces the likelihood of deployment issues in production.</p>
<p>The tests allow developers to verify that their stacks contain the expected resources, that resources are configured correctly and expected properties are set accurately. Unit testing also facilitates easier refactoring and maintenance of the CDK app code, as changes can be quickly validated against existing tests.</p>
<p>Furthermore, it promotes better documentation and understanding of the infrastructure design, as tests serve as executable specifications. Ultimately, CDK unit testing leads to more reliable, maintainable and scalable cloud infrastructure, saving time and resources in the long run while improving overall system stability.</p>
<h2 id="state-management">
  State management
  <a class="heading-link" href="#state-management">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>State management of deployed stacks is handled automatically via Cloudformation. There is no need for additional services or configuration to handle state, whether for a single or multi-account or region app.</p>
<p>Cloudformation handles all of the heavy-lifting including rollback of failed deployments.</p>
<p>In addition, through the CDK it&rsquo;s possible to generate easy-to-interpret comparison of an existing stack against changes in the app through excellent <code>cdk diff</code>&rsquo;s.</p>
<p>Finally, Cloudformation <a href="https://aws.amazon.com/about-aws/whats-new/2024/04/aws-cloudformation-changesets-enhanced-change-visibility-deployments/"  class="external-link" target="_blank" rel="noopener">ChangeSets now offer much improved change visibility</a>, which helps engineers understand the potential impact of changes.</p>
<h2 id="governance--guardrails">
  Governance &amp; Guardrails
  <a class="heading-link" href="#governance--guardrails">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>To build robust governance and guardrails into AWS CDK apps, developers can leverage tools like <code>cdk-nag</code> and <a href="https://aws.amazon.com/blogs/mt/accelerating-development-with-aws-cdk-plugin-cfnguardvalidator/"  class="external-link" target="_blank" rel="noopener"><code>CfnGuardValidator</code></a>.</p>
<p>These utilities help enforce best practices, security standards and compliance requirements throughout the infrastructure-as-code lifecycle. <code>cdk-nag</code> integrates seamlessly with CDK stacks, providing rule packs that can be customized to match organisational policies.</p>
<p><code>CfnGuardValidator</code> is backed by existing Control Tower Proactive Controls and also allows for the creation of custom rules to validate CloudFormation templates.</p>
<p>By incorporating these tools and unit tests into CI/CD pipelines, teams can automate the process of checking for potential issues before deployment, ensuring that infrastructure changes adhere to predefined standards. This approach not only enhances security and compliance but also promotes consistency across projects and reduces the risk of misconfigurations making their way into production environments.</p>
<h2 id="drawbacks">
  Drawbacks
  <a class="heading-link" href="#drawbacks">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>As always, no one tool is perfect.</p>
<ol>
<li>
<p>Performance. The CDK can at times feel slow if the system it&rsquo;s run on does not have sufficient memory, CPU or disk performance. Also, virus/malware scanners can have an considerably impact on performance.</p>
</li>
<li>
<p>When there are no CDK L2 constructs to support a service (e.g. Sagemaker domains, Transit Gateway etc.) it can be awkward and quite verbose to use L1 constructs.</p>
</li>
<li>
<p>Cloudformation has traditionally been considered &ldquo;slow&rdquo; to deploy stacks when compared to alternatives. However, features such as <a href="https://aws.amazon.com/blogs/devops/how-we-sped-up-aws-cloudformation-deployments-with-optimistic-stabilization/"  class="external-link" target="_blank" rel="noopener">Optimistic Stabilisation</a> have helped considerably with overall stack deployment time</p>
</li>
<li>
<p>Sharing of cross-region/cross-account input and output dependencies could be simpler and less elaborate</p>
</li>
</ol>
<h2 id="conclusion">
  Conclusion
  <a class="heading-link" href="#conclusion">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>At Virtuability, we&rsquo;ve found that the AWS CDK provides a lot of power, flexibility and ease of use for deploying AWS infrastructure.</p>
<p>Whether you&rsquo;re managing a simple application or a complex, multi-region, multi-account infrastructure, CDK can help. By leveraging the CDK, we help our customers create more maintainable, secure and efficient AWS environments, enabling them to focus on what truly matters – delivering value to their customers.</p>
<p>Finally, note that the <a href="https://docs.aws.amazon.com/cdk/v2/guide/best-practices.html"  class="external-link" target="_blank" rel="noopener">Best practices for developing and deploying cloud infrastructure with the AWS CDK</a> page is a valuable resource for using the AWS CDK effectively.</p>
<p>If you&rsquo;re interested in learning how the AWS CDK can transform your infrastructure management, <a href="mailto:team@virtuability.com" >reach out to us at Virtuability</a>. We&rsquo;re here to help you harness the full power of AWS and take your cloud infrastructure to the next level.</p>

      </div>


      <footer>
        


        
        
        
        
        
        
        
      </footer>
    </article>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css"
    integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">
  
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js"
    integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js"
    integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
    onload="renderMathInElement(document.body,
      {
        delimiters: [
          {left: '$$', right: '$$', display:true},
          {left: '$', right: '$', display:false},
          {left: '\\(', right: '\\)', display: false},
          {left: '\\[', right: '\\]', display: true}
        ]
      }
    );"></script>
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
    2025
     Morten Jensen 
    ·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js" integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
  

  

  


  

  

  <script async defer data-domain="jensenmo.github.io" src="https://plausible.io/js/script.js"></script>


  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>
</html>
