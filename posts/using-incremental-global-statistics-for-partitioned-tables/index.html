<!DOCTYPE html>
<html lang="en">

<head>
  <title>
  Using Incremental Global Statistics for Partitioned Tables Â· Morten Jensen
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Morten Jensen">
<meta name="description" content="
  Introduction
  
    
    Link to heading
  

Oracle has been working on improving statistics gathering in the database from release to release. With 11g my favorite statistics gathering features are: setting database/schema/table preferences - and incremental global statistics gathering on partitioned tables.
I recently came across a comparatively large database and noticed that nearly 2000 segments had no statistics on them. Furthermore the largest (partitioned) table in the database did not have global stats gathered for more than 6 years - and many of its partitions had no statistics at all. This did cause problems with sub-optimal plans being used by some queries.">
<meta name="keywords" content="Using, Incremental, Global, Statistics, Partitioned, Tables">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Using Incremental Global Statistics for Partitioned Tables">
  <meta name="twitter:description" content="Introduction Link to heading Oracle has been working on improving statistics gathering in the database from release to release. With 11g my favorite statistics gathering features are: setting database/schema/table preferences - and incremental global statistics gathering on partitioned tables.
I recently came across a comparatively large database and noticed that nearly 2000 segments had no statistics on them. Furthermore the largest (partitioned) table in the database did not have global stats gathered for more than 6 years - and many of its partitions had no statistics at all. This did cause problems with sub-optimal plans being used by some queries.">

<meta property="og:url" content="https://jensenmo.github.io/posts/using-incremental-global-statistics-for-partitioned-tables/">
  <meta property="og:site_name" content="Morten Jensen">
  <meta property="og:title" content="Using Incremental Global Statistics for Partitioned Tables">
  <meta property="og:description" content="Introduction Link to heading Oracle has been working on improving statistics gathering in the database from release to release. With 11g my favorite statistics gathering features are: setting database/schema/table preferences - and incremental global statistics gathering on partitioned tables.
I recently came across a comparatively large database and noticed that nearly 2000 segments had no statistics on them. Furthermore the largest (partitioned) table in the database did not have global stats gathered for more than 6 years - and many of its partitions had no statistics at all. This did cause problems with sub-optimal plans being used by some queries.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2011-10-14T15:51:00+01:00">
    <meta property="article:modified_time" content="2011-10-14T15:51:00+01:00">




<link rel="canonical" href="https://jensenmo.github.io/posts/using-incremental-global-statistics-for-partitioned-tables/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.min.4b392a85107b91dbdabc528edf014a6ab1a30cd44cafcd5325c8efe796794fca.css" integrity="sha256-SzkqhRB7kdvavFKO3wFKarGjDNRMr81TJcjv55Z5T8o=" crossorigin="anonymous" media="screen" />








 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>




<body class="preload-transitions colorscheme-light">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="https://jensenmo.github.io/">
      Morten Jensen
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">About</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="https://jensenmo.github.io/posts/using-incremental-global-statistics-for-partitioned-tables/">
              Using Incremental Global Statistics for Partitioned Tables
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2011-10-14T15:51:00&#43;01:00">
                October 14, 2011
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              16-minute read
            </span>
          </div>
          
          
          
        </div>
      </header>

      <div class="post-content">
        
        <h2 id="introduction">
  Introduction
  <a class="heading-link" href="#introduction">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Oracle has been working on improving statistics gathering in the database from release to release. With 11g my favorite statistics gathering features are: setting database/schema/table preferences - and incremental global statistics gathering on partitioned tables.</p>
<p>I recently came across a comparatively large database and noticed that nearly 2000 segments had no statistics on them. Furthermore the largest (partitioned) table in the database did not have global stats gathered for more than 6 years - and many of its partitions had no statistics at all. This did cause problems with sub-optimal plans being used by some queries.</p>
<p>Further analysis revealed that a 4 hour window was allowed for maintenance, including database statistics gathering - during work days only. Weekend windows were disabled. The job would run for exactly 4 hours every day. It quickly became clear that the job never completed and was terminated at the end of the maintenance window; persistently leaving many segments without any statistics behind.</p>
<p>The default action when incremental statistics are not enabled for partitioned tables is to maintain global table statistics using a full table scan. Obviously, for multi-terabyte tables this comes at a significant I/O cost and therefore takes a lot of time. The largest table happened to be in line for (global) statistics gathering and a full table scan across all partitions never returned during each 4 hour maintenance window.</p>
<p>Oracle suggests that the key difference between the internal <code>GATHER_DATABASE_STATS_JOB_PROC</code> procedure in <code>DBMS_STATS</code>, which runs during the maintenance window, and <code>GATHER_DATABASE_STATS</code> with option <code>GATHER AUTO</code> is that of the former prioritising objects that need statistics gathered. Although I didn&rsquo;t investigate this to any great extent it probably helps explain the persistent order for gathering statistics causing statistics not to be gathered for some segments that were prioritised lower. On the other hand the latter option appears to run through segments eligible for statistics gathering in alphabetic order.</p>
<h2 id="when-to-use-incremental-statistics-gathering">
  When to Use Incremental Statistics Gathering?
  <a class="heading-link" href="#when-to-use-incremental-statistics-gathering">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Many use cases of partitioned tables involve creating new partitions on a regular basis and filling those partitions with data. As the new partitions and data are added, statistics should be gathered on this data.</p>
<p>A typical scenario for incremental statistics is therefore instances where a new daily, weekly or monthly partition is added and data for the period is loaded. I.e. not all partitions are continuously loaded with substantial amounts of data.</p>
<p>The picture is less clear cut when it comes to back-filling data in older partitions. If all partitions in a table are &ldquo;touched&rdquo; by DML on a regular basis, then the partitions with significant changes, i.e. 10+% for INSERTs+UPDATEs+DELETEs compared to <code>NUM_ROWS</code> per default [6] will be analyzed again. In this case the only advantage of this approach is that global statistics on the table are gathered by calculating statistics for all partitions - as opposed to a full tablescan, which in itself could be a significant saver, preventing ORA-1555&rsquo;s after hours of runs and eliminating statistics gathering job runs persistently never completing within the maintenance window.</p>
<h2 id="how-to-enable-incremental-statistics-gathering">
  How to Enable Incremental Statistics Gathering?
  <a class="heading-link" href="#how-to-enable-incremental-statistics-gathering">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>This is quite simple. Oracle has clearly stipulated the conditions required for Incremental Statistics Gathering [1]. The table preferences for partitioned tables incremental statistics gathering must be set as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">begin</span>
</span></span><span style="display:flex;"><span>  dbms_stats.set_table_prefs(<span style="color:#e6db74">&#39;TESTUSER&#39;</span>, <span style="color:#e6db74">&#39;INCTAB&#39;</span>, <span style="color:#e6db74">&#39;ESTIMATE_PERCENT&#39;</span>, DBMS_STATS.AUTO_SAMPLE_SIZE);
</span></span><span style="display:flex;"><span>  dbms_stats.set_table_prefs(<span style="color:#e6db74">&#39;TESTUSER&#39;</span>, <span style="color:#e6db74">&#39;INCTAB&#39;</span>, <span style="color:#e6db74">&#39;INCREMENTAL&#39;</span>, <span style="color:#e6db74">&#39;TRUE&#39;</span>);
</span></span><span style="display:flex;"><span>  dbms_stats.set_table_prefs(<span style="color:#e6db74">&#39;TESTUSER&#39;</span>, <span style="color:#e6db74">&#39;INCTAB&#39;</span>, <span style="color:#e6db74">&#39;PUBLISH&#39;</span>, <span style="color:#e6db74">&#39;TRUE&#39;</span>);
</span></span><span style="display:flex;"><span>  dbms_stats.set_table_prefs(<span style="color:#e6db74">&#39;TESTUSER&#39;</span>, <span style="color:#e6db74">&#39;INCTAB&#39;</span>, <span style="color:#e6db74">&#39;GRANULARITY&#39;</span>, <span style="color:#e6db74">&#39;AUTO&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>
</span></span></code></pre></div><p>To optionally remove any previous statistics first, run:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> dbms_stats.delete_table_stats(ownname<span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>, tabname<span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;INCTAB&#39;</span>, cascade_columns<span style="color:#f92672">=&gt;</span><span style="color:#66d9ef">true</span>, cascade_indexes<span style="color:#f92672">=&gt;</span><span style="color:#66d9ef">true</span>)
</span></span></code></pre></div><p>Running the following will immediately get started with incremental statistics gathering on all tables where it has been set-up:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> DBMS_STATS.GATHER_DATABASE_STATS(<span style="color:#66d9ef">OPTIONS</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;GATHER AUTO&#39;</span>)
</span></span></code></pre></div><h2 id="the-test-case">
  The Test Case
  <a class="heading-link" href="#the-test-case">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>The following DDL and DML sets up the test case, which was run on an 11.2.0.2.3 database on Linux. It first gathers statistics on all database objects eligible for statistics gathering. It then sets up tablespace, user and partitioned table, populates the table with test data as well as does some test queries to generate <code>COL_USAGE$</code> statistics for histograms (used later). Finally, incremental statistics are enabled and database statistics are gathered again in order to generate statistics on the new table.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> DBMS_STATS.GATHER_DATABASE_STATS(<span style="color:#66d9ef">OPTIONS</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;GATHER AUTO&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">create</span> tablespace testdata datafile <span style="color:#e6db74">&#39;/u01/oradata/orcl1/testdata_01.dbf&#39;</span> <span style="color:#66d9ef">size</span> <span style="color:#ae81ff">1023</span>m extent management <span style="color:#66d9ef">local</span> autoallocate segment <span style="color:#66d9ef">space</span> management auto;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">user</span> testuser identified <span style="color:#66d9ef">by</span> testuser
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">default</span> tablespace testdata
</span></span><span style="display:flex;"><span>quota unlimited <span style="color:#66d9ef">on</span> testdata;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">grant</span> <span style="color:#66d9ef">create</span> <span style="color:#66d9ef">session</span>, <span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span>, <span style="color:#66d9ef">create</span> <span style="color:#66d9ef">view</span>, <span style="color:#66d9ef">create</span> <span style="color:#66d9ef">procedure</span>, <span style="color:#66d9ef">create</span> sequence <span style="color:#66d9ef">to</span> testuser;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">TABLE</span> TESTUSER.INCTAB;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> TESTUSER.INCTAB(
</span></span><span style="display:flex;"><span>  TESTCOL1 VARCHAR2(<span style="color:#ae81ff">120</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> ENABLE,
</span></span><span style="display:flex;"><span>  TESTCOL2 VARCHAR2(<span style="color:#ae81ff">30</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> ENABLE,
</span></span><span style="display:flex;"><span>  TESTCOL3 DATE <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> ENABLE,
</span></span><span style="display:flex;"><span>  TESTCOL4 NUMBER(<span style="color:#ae81ff">38</span>,<span style="color:#ae81ff">5</span>),
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">CONSTRAINT</span> PK_INCTAB <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span> (TESTCOL1, TESTCOL2, TESTCOL3)
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>TABLESPACE TESTDATA
</span></span><span style="display:flex;"><span>PARTITION <span style="color:#66d9ef">BY</span> RANGE (TESTCOL3)
</span></span><span style="display:flex;"><span>(
</span></span><span style="display:flex;"><span>  PARTITION PART_20110830 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span> (TO_DATE(<span style="color:#e6db74">&#39;2011-09-01&#39;</span>, <span style="color:#e6db74">&#39;YYYY-MM-DD&#39;</span>)) SEGMENT CREATION <span style="color:#66d9ef">IMMEDIATE</span> TABLESPACE TESTDATA,
</span></span><span style="display:flex;"><span>  PARTITION PART_20110901 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span> (TO_DATE(<span style="color:#e6db74">&#39;2011-09-02&#39;</span>, <span style="color:#e6db74">&#39;YYYY-MM-DD&#39;</span>)) SEGMENT CREATION <span style="color:#66d9ef">IMMEDIATE</span> TABLESPACE TESTDATA,
</span></span><span style="display:flex;"><span>  PARTITION PART_20110902 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span> (TO_DATE(<span style="color:#e6db74">&#39;2011-09-03&#39;</span>, <span style="color:#e6db74">&#39;YYYY-MM-DD&#39;</span>)) SEGMENT CREATION <span style="color:#66d9ef">IMMEDIATE</span> TABLESPACE TESTDATA,
</span></span><span style="display:flex;"><span>  PARTITION PART_20110903 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span> (TO_DATE(<span style="color:#e6db74">&#39;2011-09-04&#39;</span>, <span style="color:#e6db74">&#39;YYYY-MM-DD&#39;</span>)) SEGMENT CREATION <span style="color:#66d9ef">IMMEDIATE</span> TABLESPACE TESTDATA,
</span></span><span style="display:flex;"><span>  PARTITION PART_20110904 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span> (TO_DATE(<span style="color:#e6db74">&#39;2011-09-05&#39;</span>, <span style="color:#e6db74">&#39;YYYY-MM-DD&#39;</span>)) SEGMENT CREATION <span style="color:#66d9ef">IMMEDIATE</span> TABLESPACE TESTDATA,
</span></span><span style="display:flex;"><span>  PARTITION PART_20110905 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span> (TO_DATE(<span style="color:#e6db74">&#39;2011-09-06&#39;</span>, <span style="color:#e6db74">&#39;YYYY-MM-DD&#39;</span>)) SEGMENT CREATION <span style="color:#66d9ef">IMMEDIATE</span> TABLESPACE TESTDATA,
</span></span><span style="display:flex;"><span>  PARTITION PART_20110906 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span> (TO_DATE(<span style="color:#e6db74">&#39;2011-09-07&#39;</span>, <span style="color:#e6db74">&#39;YYYY-MM-DD&#39;</span>)) SEGMENT CREATION <span style="color:#66d9ef">IMMEDIATE</span> TABLESPACE TESTDATA,
</span></span><span style="display:flex;"><span>  PARTITION PART_20110907 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span> (TO_DATE(<span style="color:#e6db74">&#39;2011-09-08&#39;</span>, <span style="color:#e6db74">&#39;YYYY-MM-DD&#39;</span>)) SEGMENT CREATION <span style="color:#66d9ef">IMMEDIATE</span> TABLESPACE TESTDATA
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">truncate</span> <span style="color:#66d9ef">table</span> TESTUSER.INCTAB;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> TESTUSER.INCTAB
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> (
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;test1&#39;</span> TESTCOL1, <span style="color:#e6db74">&#39;METRIC1&#39;</span> TESTCOL2, TO_DATE(<span style="color:#e6db74">&#39;2011-09-01 00:00:00&#39;</span>, <span style="color:#e6db74">&#39;YYYY-MM-DD HH24:MI:SS&#39;</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">7</span><span style="color:#f92672">*</span>rownum<span style="color:#f92672">/</span><span style="color:#ae81ff">10001</span> TESTCOL3, <span style="color:#ae81ff">0</span> TESTCOL4
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">from</span> dba_objects o1, dba_extents o2
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">where</span> rownum <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">10001</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;test2&#39;</span>, <span style="color:#e6db74">&#39;METRIC2&#39;</span>, TO_DATE(<span style="color:#e6db74">&#39;2011-09-01 00:00:00&#39;</span>, <span style="color:#e6db74">&#39;YYYY-MM-DD HH24:MI:SS&#39;</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">7</span><span style="color:#f92672">*</span>rownum<span style="color:#f92672">/</span><span style="color:#ae81ff">5001</span>, <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">from</span> dba_objects o1, dba_extents o2
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">where</span> rownum <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">5001</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;test3&#39;</span>, <span style="color:#e6db74">&#39;METRIC3&#39;</span>, TO_DATE(<span style="color:#e6db74">&#39;2011-09-01 00:00:00&#39;</span>, <span style="color:#e6db74">&#39;YYYY-MM-DD HH24:MI:SS&#39;</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">7</span><span style="color:#f92672">*</span>rownum<span style="color:#f92672">/</span><span style="color:#ae81ff">1001</span>, <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">from</span> dba_objects o1, dba_extents o2
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">where</span> rownum <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">1001</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;test4&#39;</span>, <span style="color:#e6db74">&#39;METRIC4&#39;</span>, TO_DATE(<span style="color:#e6db74">&#39;2011-09-01 00:00:00&#39;</span>, <span style="color:#e6db74">&#39;YYYY-MM-DD HH24:MI:SS&#39;</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">7</span><span style="color:#f92672">*</span>rownum<span style="color:#f92672">/</span><span style="color:#ae81ff">101</span>, <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">from</span> dba_objects o1, dba_extents o2
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">where</span> rownum <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">101</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;test5&#39;</span>, <span style="color:#e6db74">&#39;METRIC5&#39;</span>, TO_DATE(<span style="color:#e6db74">&#39;2011-09-01 00:00:00&#39;</span>, <span style="color:#e6db74">&#39;YYYY-MM-DD HH24:MI:SS&#39;</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">7</span><span style="color:#f92672">*</span>rownum<span style="color:#f92672">/</span><span style="color:#ae81ff">51</span>, <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">from</span> dba_objects o1, dba_extents o2
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">where</span> rownum <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">51</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">commit</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> dbms_stats.delete_table_stats(ownname<span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>, tabname<span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;INCTAB&#39;</span>, cascade_columns<span style="color:#f92672">=&gt;</span><span style="color:#66d9ef">true</span>, cascade_indexes<span style="color:#f92672">=&gt;</span><span style="color:#66d9ef">true</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- Prime some equality predicate operations to prime col_usage$ for histograms
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> TESTUSER.INCTAB <span style="color:#66d9ef">where</span> TESTCOL1<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;test2&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> TESTUSER.INCTAB <span style="color:#66d9ef">where</span> TESTCOL1 <span style="color:#66d9ef">between</span> <span style="color:#e6db74">&#39;test2&#39;</span> <span style="color:#66d9ef">and</span> <span style="color:#e6db74">&#39;test5&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> TESTUSER.INCTAB <span style="color:#66d9ef">where</span> TESTCOL1 <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;test2%&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> TESTUSER.INCTAB <span style="color:#66d9ef">where</span> TESTCOL2<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;METRIC3&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> TESTUSER.INCTAB <span style="color:#66d9ef">where</span> TESTCOL2 <span style="color:#66d9ef">between</span> <span style="color:#e6db74">&#39;METRIC3&#39;</span> <span style="color:#66d9ef">and</span> <span style="color:#e6db74">&#39;METRIC5&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> TESTUSER.INCTAB <span style="color:#66d9ef">where</span> TESTCOL2 <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;METRIC%&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> dbms_stats.flush_database_monitoring_info
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> long <span style="color:#ae81ff">8192</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> dbms_stats.report_col_usage(<span style="color:#e6db74">&#39;TESTUSER&#39;</span>, <span style="color:#e6db74">&#39;INCTAB&#39;</span>) <span style="color:#66d9ef">from</span> dual;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">###############################################################################</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">COLUMN</span> <span style="color:#66d9ef">USAGE</span> REPORT <span style="color:#66d9ef">FOR</span> TESTUSER.INCTAB
</span></span><span style="display:flex;"><span>.......................................
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>. TESTCOL1                            : EQ RANGE <span style="color:#66d9ef">LIKE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>. TESTCOL2                            : EQ RANGE <span style="color:#66d9ef">LIKE</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">###############################################################################</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">begin</span>
</span></span><span style="display:flex;"><span>  dbms_stats.set_table_prefs(<span style="color:#e6db74">&#39;TESTUSER&#39;</span>, <span style="color:#e6db74">&#39;INCTAB&#39;</span>, <span style="color:#e6db74">&#39;ESTIMATE_PERCENT&#39;</span>, DBMS_STATS.AUTO_SAMPLE_SIZE);
</span></span><span style="display:flex;"><span>  dbms_stats.set_table_prefs(<span style="color:#e6db74">&#39;TESTUSER&#39;</span>, <span style="color:#e6db74">&#39;INCTAB&#39;</span>, <span style="color:#e6db74">&#39;INCREMENTAL&#39;</span>, <span style="color:#e6db74">&#39;TRUE&#39;</span>);
</span></span><span style="display:flex;"><span>  dbms_stats.set_table_prefs(<span style="color:#e6db74">&#39;TESTUSER&#39;</span>, <span style="color:#e6db74">&#39;INCTAB&#39;</span>, <span style="color:#e6db74">&#39;PUBLISH&#39;</span>, <span style="color:#e6db74">&#39;TRUE&#39;</span>);
</span></span><span style="display:flex;"><span>  dbms_stats.set_table_prefs(<span style="color:#e6db74">&#39;TESTUSER&#39;</span>, <span style="color:#e6db74">&#39;INCTAB&#39;</span>, <span style="color:#e6db74">&#39;GRANULARITY&#39;</span>, <span style="color:#e6db74">&#39;AUTO&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> DBMS_STATS.GATHER_DATABASE_STATS(<span style="color:#66d9ef">OPTIONS</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;GATHER AUTO&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> partition_name, sample_size, num_rows, last_analyzed
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> dba_tab_partitions
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> table_owner<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> <span style="color:#66d9ef">table_name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;INCTAB&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> partition_name;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>PARTITION_NAME                 SAMPLE_SIZE   NUM_ROWS LAST_ANALYZED
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------ ----------- ---------- -------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>PART_20110830                                      <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">36</span>
</span></span><span style="display:flex;"><span>PART_20110901                         <span style="color:#ae81ff">2305</span>       <span style="color:#ae81ff">2305</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">36</span>
</span></span><span style="display:flex;"><span>PART_20110902                         <span style="color:#ae81ff">2307</span>       <span style="color:#ae81ff">2307</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">36</span>
</span></span><span style="display:flex;"><span>PART_20110903                         <span style="color:#ae81ff">2309</span>       <span style="color:#ae81ff">2309</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>
</span></span><span style="display:flex;"><span>PART_20110904                         <span style="color:#ae81ff">2307</span>       <span style="color:#ae81ff">2307</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>
</span></span><span style="display:flex;"><span>PART_20110905                         <span style="color:#ae81ff">2309</span>       <span style="color:#ae81ff">2309</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>
</span></span><span style="display:flex;"><span>PART_20110906                         <span style="color:#ae81ff">2307</span>       <span style="color:#ae81ff">2307</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>
</span></span><span style="display:flex;"><span>PART_20110907                         <span style="color:#ae81ff">2306</span>       <span style="color:#ae81ff">2306</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span> <span style="color:#66d9ef">rows</span> selected.
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> partition_name, inserts, updates, deletes, <span style="color:#66d9ef">timestamp</span>, truncated, drop_segments
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> dba_tab_modifications
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> table_owner<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> <span style="color:#66d9ef">table_name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;INCTAB&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">no</span> <span style="color:#66d9ef">rows</span> selected
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> sample_size, num_rows, last_analyzed
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> dba_tables
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> <span style="color:#66d9ef">owner</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> <span style="color:#66d9ef">table_name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;INCTAB&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>SAMPLE_SIZE   NUM_ROWS LAST_ANALYZED
</span></span><span style="display:flex;"><span><span style="color:#75715e">----------- ---------- -------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#ae81ff">16150</span>      <span style="color:#ae81ff">16150</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">COLUMN_NAME</span>, NUM_DISTINCT, DENSITY, NUM_NULLS, LAST_ANALYZED, SAMPLE_SIZE, AVG_COL_LEN, HISTOGRAM
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> dba_tab_columns
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> <span style="color:#66d9ef">owner</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> <span style="color:#66d9ef">table_name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;INCTAB&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> column_id;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">COLUMN_NAME</span>                    NUM_DISTINCT    DENSITY  NUM_NULLS LAST_ANALYZED       SAMPLE_SIZE AVG_COL_LEN HISTOGRAM
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------ ------------ ---------- ---------- ------------------- ----------- ----------- ---------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>TESTCOL1                                  <span style="color:#ae81ff">5</span>  .<span style="color:#ae81ff">00003096</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>       <span style="color:#ae81ff">16150</span>           <span style="color:#ae81ff">6</span> FREQUENCY
</span></span><span style="display:flex;"><span>TESTCOL2                                  <span style="color:#ae81ff">5</span>  .<span style="color:#ae81ff">00003096</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>       <span style="color:#ae81ff">16150</span>           <span style="color:#ae81ff">8</span> FREQUENCY
</span></span><span style="display:flex;"><span>TESTCOL3                              <span style="color:#ae81ff">16048</span> .<span style="color:#ae81ff">000062313</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>       <span style="color:#ae81ff">16150</span>           <span style="color:#ae81ff">8</span> <span style="color:#66d9ef">NONE</span>
</span></span><span style="display:flex;"><span>TESTCOL4                                  <span style="color:#ae81ff">1</span>          <span style="color:#ae81ff">1</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>       <span style="color:#ae81ff">16150</span>           <span style="color:#ae81ff">2</span> <span style="color:#66d9ef">NONE</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">column_name</span>, <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> dba_tab_histograms
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> <span style="color:#66d9ef">owner</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> <span style="color:#66d9ef">table_name</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;INCTAB&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> <span style="color:#66d9ef">column_name</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> <span style="color:#66d9ef">column_name</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">COLUMN_NAME</span>                      <span style="color:#66d9ef">COUNT</span>(<span style="color:#f92672">*</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------ ----------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>TESTCOL1                                <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>TESTCOL2                                <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>TESTCOL3                                <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>TESTCOL4                                <span style="color:#ae81ff">2</span>
</span></span></code></pre></div><h2 id="observations">
  Observations
  <a class="heading-link" href="#observations">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<h3 id="statistics-gathering-thresholds">
  Statistics Gathering Thresholds
  <a class="heading-link" href="#statistics-gathering-thresholds">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>This section shows that there is an adherence to the 10% threshold on both partitions and global table statistics as documented by Oracle [6]. It shows this only for INSERTs in order to keep the example simple and concise.</p>
<p>One interesting observation is that statistics are gathered on individual partitions for which 10+% rows (compared to <code>NUM_ROWS</code>) are changed. However, this does not lead to an update in global table statistics. Global table statistics are not computed until at least 10+% of rows for all partitions in the table have changed.</p>
<p>Another interesting observation is that when global table statistics are gathered, all partitions for which outstanding table modifications have been recorded will have statistics gathered individually as well - before global table statistics are computed from the incremental partition statistics.</p>
<p>Refer to the current statistics that exist on the table in the previous section.</p>
<p>Then proceed with adding 10% minus one row to one partition (230 / 2305 existing rows):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> TESTUSER.INCTAB
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> (
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;test6&#39;</span> TESTCOL1, <span style="color:#e6db74">&#39;METRIC1&#39;</span> TESTCOL2, TO_DATE(<span style="color:#e6db74">&#39;2011-09-01 00:00:00&#39;</span>, <span style="color:#e6db74">&#39;YYYY-MM-DD HH24:MI:SS&#39;</span>) <span style="color:#f92672">+</span> rownum<span style="color:#f92672">/</span><span style="color:#ae81ff">231</span> TESTCOL3, <span style="color:#ae81ff">0</span> TESTCOL4
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">from</span> dba_objects o1, dba_extents o2
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">where</span> rownum <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">231</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">230</span> <span style="color:#66d9ef">rows</span> created.
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">commit</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> dbms_stats.flush_database_monitoring_info
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> partition_name, inserts, updates, deletes, <span style="color:#66d9ef">timestamp</span>, truncated, drop_segments
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> dba_tab_modifications
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> table_owner<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> <span style="color:#66d9ef">table_name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;INCTAB&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>PARTITION_NAME                    INSERTS    UPDATES    DELETES <span style="color:#66d9ef">TIMESTAMP</span>           TRU DROP_SEGMENTS
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------ ---------- ---------- ---------- ------------------- --- -------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                      <span style="color:#ae81ff">230</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">31</span>:<span style="color:#ae81ff">48</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110901                         <span style="color:#ae81ff">230</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">31</span>:<span style="color:#ae81ff">48</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> DBMS_STATS.GATHER_DATABASE_STATS(<span style="color:#66d9ef">OPTIONS</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;GATHER AUTO&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> partition_name, sample_size, num_rows, last_analyzed
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> dba_tab_partitions
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> table_owner<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> <span style="color:#66d9ef">table_name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;INCTAB&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> partition_name;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>PARTITION_NAME                 SAMPLE_SIZE   NUM_ROWS LAST_ANALYZED
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------ ----------- ---------- -------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>PART_20110830                                      <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">36</span>
</span></span><span style="display:flex;"><span>PART_20110901                         <span style="color:#ae81ff">2305</span>       <span style="color:#ae81ff">2305</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">36</span>
</span></span><span style="display:flex;"><span>PART_20110902                         <span style="color:#ae81ff">2307</span>       <span style="color:#ae81ff">2307</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">36</span>
</span></span><span style="display:flex;"><span>PART_20110903                         <span style="color:#ae81ff">2309</span>       <span style="color:#ae81ff">2309</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>
</span></span><span style="display:flex;"><span>PART_20110904                         <span style="color:#ae81ff">2307</span>       <span style="color:#ae81ff">2307</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>
</span></span><span style="display:flex;"><span>PART_20110905                         <span style="color:#ae81ff">2309</span>       <span style="color:#ae81ff">2309</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>
</span></span><span style="display:flex;"><span>PART_20110906                         <span style="color:#ae81ff">2307</span>       <span style="color:#ae81ff">2307</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>
</span></span><span style="display:flex;"><span>PART_20110907                         <span style="color:#ae81ff">2306</span>       <span style="color:#ae81ff">2306</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span> <span style="color:#66d9ef">rows</span> selected.
</span></span></code></pre></div><p>As can be seen, no new statistics have been gathered at this point. Let&rsquo;s add one more row (231 / 2305) and see what happens next:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> TESTUSER.INCTAB
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> (
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;test7&#39;</span> TESTCOL1, <span style="color:#e6db74">&#39;METRIC1&#39;</span> TESTCOL2, TO_DATE(<span style="color:#e6db74">&#39;2011-09-01 00:00:00&#39;</span>, <span style="color:#e6db74">&#39;YYYY-MM-DD HH24:MI:SS&#39;</span>) <span style="color:#f92672">+</span> rownum<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span> TESTCOL3, <span style="color:#ae81ff">0</span> TESTCOL4
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">from</span> dba_objects o1, dba_extents o2
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">where</span> rownum <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> <span style="color:#66d9ef">row</span> created.
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">commit</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> dbms_stats.flush_database_monitoring_info
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> partition_name, inserts, updates, deletes, <span style="color:#66d9ef">timestamp</span>, truncated, drop_segments
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> dba_tab_modifications
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> table_owner<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> <span style="color:#66d9ef">table_name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;INCTAB&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>PARTITION_NAME                    INSERTS    UPDATES    DELETES <span style="color:#66d9ef">TIMESTAMP</span>           TRU DROP_SEGMENTS
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------ ---------- ---------- ---------- ------------------- --- -------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                      <span style="color:#ae81ff">231</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">36</span>:<span style="color:#ae81ff">27</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110901                         <span style="color:#ae81ff">231</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">36</span>:<span style="color:#ae81ff">27</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> DBMS_STATS.GATHER_DATABASE_STATS(<span style="color:#66d9ef">OPTIONS</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;GATHER AUTO&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> partition_name, inserts, updates, deletes, <span style="color:#66d9ef">timestamp</span>, truncated, drop_segments
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> dba_tab_modifications
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> table_owner<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> <span style="color:#66d9ef">table_name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;INCTAB&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>PARTITION_NAME                    INSERTS    UPDATES    DELETES <span style="color:#66d9ef">TIMESTAMP</span>           TRU DROP_SEGMENTS
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------ ---------- ---------- ---------- ------------------- --- -------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                      <span style="color:#ae81ff">231</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">36</span>:<span style="color:#ae81ff">27</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> partition_name, sample_size, num_rows, last_analyzed
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> dba_tab_partitions
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> table_owner<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> <span style="color:#66d9ef">table_name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;INCTAB&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> partition_name;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>PARTITION_NAME                 SAMPLE_SIZE   NUM_ROWS LAST_ANALYZED
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------ ----------- ---------- -------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>PART_20110830                                       <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">36</span>
</span></span><span style="display:flex;"><span>PART_20110901                         <span style="color:#ae81ff">2536</span>       <span style="color:#ae81ff">2536</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">36</span>:<span style="color:#ae81ff">47</span>
</span></span><span style="display:flex;"><span>PART_20110902                         <span style="color:#ae81ff">2307</span>       <span style="color:#ae81ff">2307</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">36</span>
</span></span><span style="display:flex;"><span>PART_20110903                         <span style="color:#ae81ff">2309</span>       <span style="color:#ae81ff">2309</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>
</span></span><span style="display:flex;"><span>PART_20110904                         <span style="color:#ae81ff">2307</span>       <span style="color:#ae81ff">2307</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>
</span></span><span style="display:flex;"><span>PART_20110905                         <span style="color:#ae81ff">2309</span>       <span style="color:#ae81ff">2309</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>
</span></span><span style="display:flex;"><span>PART_20110906                         <span style="color:#ae81ff">2307</span>       <span style="color:#ae81ff">2307</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>
</span></span><span style="display:flex;"><span>PART_20110907                         <span style="color:#ae81ff">2306</span>       <span style="color:#ae81ff">2306</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span> <span style="color:#66d9ef">rows</span> selected.
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> sample_size, num_rows, last_analyzed
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> dba_tables
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> <span style="color:#66d9ef">owner</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> <span style="color:#66d9ef">table_name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;INCTAB&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>SAMPLE_SIZE   NUM_ROWS LAST_ANALYZED
</span></span><span style="display:flex;"><span><span style="color:#75715e">----------- ---------- -------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#ae81ff">16150</span>      <span style="color:#ae81ff">16150</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>
</span></span></code></pre></div><p>We can see that statistics for the partition have been gathered. However, global statistics remain unaffected.</p>
<p>Let&rsquo;s add enough rows to make up exactly 10% rows to the table over all, i.e. 1615 - we have already inserted 231 - so lets insert 1384 more spread across the partitions:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> TESTUSER.INCTAB
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> (
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;test8&#39;</span> TESTCOL1, <span style="color:#e6db74">&#39;METRIC1&#39;</span> TESTCOL2, TO_DATE(<span style="color:#e6db74">&#39;2011-09-01 00:00:00&#39;</span>, <span style="color:#e6db74">&#39;YYYY-MM-DD HH24:MI:SS&#39;</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">7</span><span style="color:#f92672">*</span>rownum<span style="color:#f92672">/</span><span style="color:#ae81ff">1385</span> TESTCOL3, <span style="color:#ae81ff">0</span> TESTCOL4
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">from</span> dba_objects o1, dba_extents o2
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">where</span> rownum <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">1385</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">commit</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> dbms_stats.flush_database_monitoring_info
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> partition_name, inserts, updates, deletes, <span style="color:#66d9ef">timestamp</span>, truncated, drop_segments
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> dba_tab_modifications
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> table_owner<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> <span style="color:#66d9ef">table_name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;INCTAB&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>PARTITION_NAME                    INSERTS    UPDATES    DELETES <span style="color:#66d9ef">TIMESTAMP</span>           TRU DROP_SEGMENTS
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------ ---------- ---------- ---------- ------------------- --- -------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                     <span style="color:#ae81ff">1615</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">47</span>:<span style="color:#ae81ff">37</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110901                         <span style="color:#ae81ff">198</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">47</span>:<span style="color:#ae81ff">37</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110902                         <span style="color:#ae81ff">198</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">46</span>:<span style="color:#ae81ff">02</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110903                         <span style="color:#ae81ff">198</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">46</span>:<span style="color:#ae81ff">02</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110904                         <span style="color:#ae81ff">197</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">46</span>:<span style="color:#ae81ff">02</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110905                         <span style="color:#ae81ff">198</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">46</span>:<span style="color:#ae81ff">02</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110906                         <span style="color:#ae81ff">198</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">46</span>:<span style="color:#ae81ff">02</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110907                         <span style="color:#ae81ff">197</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">46</span>:<span style="color:#ae81ff">02</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span> <span style="color:#66d9ef">rows</span> selected.
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> DBMS_STATS.GATHER_DATABASE_STATS(<span style="color:#66d9ef">OPTIONS</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;GATHER AUTO&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> partition_name, inserts, updates, deletes, <span style="color:#66d9ef">timestamp</span>, truncated, drop_segments
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> dba_tab_modifications
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> table_owner<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> <span style="color:#66d9ef">table_name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;INCTAB&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>PARTITION_NAME                    INSERTS    UPDATES    DELETES <span style="color:#66d9ef">TIMESTAMP</span>           TRU DROP_SEGMENTS
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------ ---------- ---------- ---------- ------------------- --- -------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                     <span style="color:#ae81ff">1615</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">47</span>:<span style="color:#ae81ff">37</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110901                         <span style="color:#ae81ff">198</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">47</span>:<span style="color:#ae81ff">37</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110902                         <span style="color:#ae81ff">198</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">46</span>:<span style="color:#ae81ff">02</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110903                         <span style="color:#ae81ff">198</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">46</span>:<span style="color:#ae81ff">02</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110904                         <span style="color:#ae81ff">197</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">46</span>:<span style="color:#ae81ff">02</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110905                         <span style="color:#ae81ff">198</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">46</span>:<span style="color:#ae81ff">02</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110906                         <span style="color:#ae81ff">198</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">46</span>:<span style="color:#ae81ff">02</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110907                         <span style="color:#ae81ff">197</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">46</span>:<span style="color:#ae81ff">02</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span> <span style="color:#66d9ef">rows</span> selected.
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> sample_size, num_rows, last_analyzed
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> dba_tables
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> <span style="color:#66d9ef">owner</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> <span style="color:#66d9ef">table_name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;INCTAB&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>SAMPLE_SIZE   NUM_ROWS LAST_ANALYZED
</span></span><span style="display:flex;"><span><span style="color:#75715e">----------- ---------- -------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#ae81ff">16150</span>      <span style="color:#ae81ff">16150</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">35</span>
</span></span></code></pre></div><p>That was unexpected - no statistics have been gathered at exactly 10%. Perhaps &gt; 10% rows must be changed. Let&rsquo;s try one more row:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> TESTUSER.INCTAB
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> (
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;test9&#39;</span> TESTCOL1, <span style="color:#e6db74">&#39;METRIC1&#39;</span> TESTCOL2, TO_DATE(<span style="color:#e6db74">&#39;2011-09-01 00:00:00&#39;</span>, <span style="color:#e6db74">&#39;YYYY-MM-DD HH24:MI:SS&#39;</span>) <span style="color:#f92672">+</span> rownum<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span> TESTCOL3, <span style="color:#ae81ff">0</span> TESTCOL4
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">from</span> dba_objects o1, dba_extents o2
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">where</span> rownum <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">commit</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> dbms_stats.flush_database_monitoring_info
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> partition_name, inserts, updates, deletes, <span style="color:#66d9ef">timestamp</span>, truncated, drop_segments
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> dba_tab_modifications
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> table_owner<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> <span style="color:#66d9ef">table_name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;INCTAB&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>PARTITION_NAME                    INSERTS    UPDATES    DELETES <span style="color:#66d9ef">TIMESTAMP</span>           TRU DROP_SEGMENTS
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------ ---------- ---------- ---------- ------------------- --- -------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                     <span style="color:#ae81ff">1616</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">49</span>:<span style="color:#ae81ff">36</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110901                         <span style="color:#ae81ff">199</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">49</span>:<span style="color:#ae81ff">36</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110902                         <span style="color:#ae81ff">198</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">46</span>:<span style="color:#ae81ff">02</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110903                         <span style="color:#ae81ff">198</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">46</span>:<span style="color:#ae81ff">02</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110904                         <span style="color:#ae81ff">197</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">46</span>:<span style="color:#ae81ff">02</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110905                         <span style="color:#ae81ff">198</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">46</span>:<span style="color:#ae81ff">02</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110906                         <span style="color:#ae81ff">198</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">46</span>:<span style="color:#ae81ff">02</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>PART_20110907                         <span style="color:#ae81ff">197</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">46</span>:<span style="color:#ae81ff">02</span> <span style="color:#66d9ef">NO</span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span> <span style="color:#66d9ef">rows</span> selected.
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> DBMS_STATS.GATHER_DATABASE_STATS(<span style="color:#66d9ef">OPTIONS</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;GATHER AUTO&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> partition_name, inserts, updates, deletes, <span style="color:#66d9ef">timestamp</span>, truncated, drop_segments
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> dba_tab_modifications
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> table_owner<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> <span style="color:#66d9ef">table_name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;INCTAB&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">no</span> <span style="color:#66d9ef">rows</span> selected
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> sample_size, num_rows, last_analyzed
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> dba_tables
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> <span style="color:#66d9ef">owner</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> <span style="color:#66d9ef">table_name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;INCTAB&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>SAMPLE_SIZE   NUM_ROWS LAST_ANALYZED
</span></span><span style="display:flex;"><span><span style="color:#75715e">----------- ---------- -------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#ae81ff">17766</span>      <span style="color:#ae81ff">17766</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">50</span>:<span style="color:#ae81ff">00</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> partition_name, sample_size, num_rows, last_analyzed
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> dba_tab_partitions
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> table_owner<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> <span style="color:#66d9ef">table_name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;INCTAB&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> partition_name;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>PARTITION_NAME                 SAMPLE_SIZE   NUM_ROWS LAST_ANALYZED
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------ ----------- ---------- -------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>PART_20110830                                      <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">25</span>:<span style="color:#ae81ff">36</span>
</span></span><span style="display:flex;"><span>PART_20110901                         <span style="color:#ae81ff">2735</span>       <span style="color:#ae81ff">2735</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">49</span>:<span style="color:#ae81ff">59</span>
</span></span><span style="display:flex;"><span>PART_20110902                         <span style="color:#ae81ff">2505</span>       <span style="color:#ae81ff">2505</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">50</span>:<span style="color:#ae81ff">00</span>
</span></span><span style="display:flex;"><span>PART_20110903                         <span style="color:#ae81ff">2507</span>       <span style="color:#ae81ff">2507</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">49</span>:<span style="color:#ae81ff">59</span>
</span></span><span style="display:flex;"><span>PART_20110904                         <span style="color:#ae81ff">2504</span>       <span style="color:#ae81ff">2504</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">49</span>:<span style="color:#ae81ff">59</span>
</span></span><span style="display:flex;"><span>PART_20110905                         <span style="color:#ae81ff">2507</span>       <span style="color:#ae81ff">2507</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">50</span>:<span style="color:#ae81ff">00</span>
</span></span><span style="display:flex;"><span>PART_20110906                         <span style="color:#ae81ff">2505</span>       <span style="color:#ae81ff">2505</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">50</span>:<span style="color:#ae81ff">00</span>
</span></span><span style="display:flex;"><span>PART_20110907                         <span style="color:#ae81ff">2503</span>       <span style="color:#ae81ff">2503</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">13</span>:<span style="color:#ae81ff">50</span>:<span style="color:#ae81ff">00</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span> <span style="color:#66d9ef">rows</span> selected.
</span></span></code></pre></div><p>We can see that all partitions that have outstanding table modifications will have incremental statistics gathered - prior to global table statistics being computed.</p>
<h3 id="using-stale-percentage">
  Using Stale Percentage
  <a class="heading-link" href="#using-stale-percentage">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>With 11g it is possible to set the value for how many rows are be added/modified to a table or partition(s) before new statistics are gathered in accordance with <code>DBA_TAB_MODIFICATIONS</code>. This also works for tables with incremental statistics enabled:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> dbms_stats.set_table_prefs(<span style="color:#e6db74">&#39;TESTUSER&#39;</span>, <span style="color:#e6db74">&#39;INCTAB&#39;</span>,<span style="color:#e6db74">&#39;STALE_PERCENT&#39;</span>,<span style="color:#ae81ff">20</span>)
</span></span></code></pre></div><p>Running through the example above again, this time with &lt; / = / &gt; 20% of rows attains the same outcome.</p>
<p>Where no significant benefit is expected in terms of more optimal plans or cost calculation accuracy from the default 10% this number can be amended.</p>
<h3 id="method_opt-is-ignored">
  METHOD_OPT is Ignored
  <a class="heading-link" href="#method_opt-is-ignored">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>For those DBAs who know the data or for whom plan stability is of importance, it seems natural to consider altering histograms parameters. However, unfortunately <code>METHOD_OPT</code> is ignored.</p>
<p>The following demonstrates this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> dbms_stats.set_table_prefs(<span style="color:#e6db74">&#39;TESTUSER&#39;</span>, <span style="color:#e6db74">&#39;INCTAB&#39;</span>, <span style="color:#e6db74">&#39;METHOD_OPT&#39;</span>, <span style="color:#e6db74">&#39;FOR ALL COLUMNS SIZE 1&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> dbms_stats.delete_table_stats(ownname<span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>, tabname<span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;INCTAB&#39;</span>, cascade_columns<span style="color:#f92672">=&gt;</span><span style="color:#66d9ef">true</span>, cascade_indexes<span style="color:#f92672">=&gt;</span><span style="color:#66d9ef">true</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> DBMS_STATS.GATHER_DATABASE_STATS(<span style="color:#66d9ef">OPTIONS</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;GATHER AUTO&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">COLUMN_NAME</span>, NUM_DISTINCT, DENSITY, NUM_NULLS, LAST_ANALYZED, SAMPLE_SIZE, AVG_COL_LEN, HISTOGRAM
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> dba_tab_columns
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> <span style="color:#66d9ef">owner</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> <span style="color:#66d9ef">table_name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;INCTAB&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> column_id;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">COLUMN_NAME</span>                    NUM_DISTINCT    DENSITY  NUM_NULLS LAST_ANALYZED       SAMPLE_SIZE AVG_COL_LEN HISTOGRAM
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------ ------------ ---------- ---------- ------------------- ----------- ----------- ---------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>TESTCOL1                                  <span style="color:#ae81ff">5</span>  .<span style="color:#ae81ff">00003096</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">10</span>:<span style="color:#ae81ff">32</span>:<span style="color:#ae81ff">09</span>       <span style="color:#ae81ff">16150</span>           <span style="color:#ae81ff">6</span> FREQUENCY
</span></span><span style="display:flex;"><span>TESTCOL2                                  <span style="color:#ae81ff">5</span>  .<span style="color:#ae81ff">00003096</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">10</span>:<span style="color:#ae81ff">32</span>:<span style="color:#ae81ff">09</span>       <span style="color:#ae81ff">16150</span>           <span style="color:#ae81ff">8</span> FREQUENCY
</span></span><span style="display:flex;"><span>TESTCOL3                              <span style="color:#ae81ff">16048</span> .<span style="color:#ae81ff">000062313</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">10</span>:<span style="color:#ae81ff">32</span>:<span style="color:#ae81ff">09</span>       <span style="color:#ae81ff">16150</span>           <span style="color:#ae81ff">8</span> <span style="color:#66d9ef">NONE</span>
</span></span><span style="display:flex;"><span>TESTCOL4                                  <span style="color:#ae81ff">1</span>          <span style="color:#ae81ff">1</span>          <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2011</span><span style="color:#f92672">-</span><span style="color:#ae81ff">10</span><span style="color:#f92672">-</span><span style="color:#ae81ff">14</span> <span style="color:#ae81ff">10</span>:<span style="color:#ae81ff">32</span>:<span style="color:#ae81ff">09</span>       <span style="color:#ae81ff">16150</span>           <span style="color:#ae81ff">2</span> <span style="color:#66d9ef">NONE</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">column_name</span>, <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> dba_tab_histograms
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> <span style="color:#66d9ef">owner</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TESTUSER&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> <span style="color:#66d9ef">table_name</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;INCTAB&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> <span style="color:#66d9ef">column_name</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> <span style="color:#66d9ef">column_name</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">COLUMN_NAME</span>                      <span style="color:#66d9ef">COUNT</span>(<span style="color:#f92672">*</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------ ----------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>TESTCOL1                                <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>TESTCOL2                                <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>TESTCOL3                                <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>TESTCOL4                                <span style="color:#ae81ff">2</span>
</span></span></code></pre></div><h2 id="interesting-objects">
  Interesting Objects
  <a class="heading-link" href="#interesting-objects">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>The actual incremental statistics used for global statistics calculations on partitioned tables appear to be stored in the two tables <code>SYS.WRI$_OPTSTAT_SYNOPSIS_HEAD$</code> and <code>SYS.WRI$_OPTSTAT_SYNOPSIS$</code>.</p>
<p>The default statistics gathering configuration that is picked up for segments that have not been overridden is stored in <code>SYS.OPTSTAT_HIST_CONTROL$</code>.</p>
<p>The statistics gathering preferences for individual tables are stored in <code>SYS.DBA_TAB_STAT_PREFS</code>.</p>
<h2 id="bugs--concerns">
  Bugs &amp; Concerns
  <a class="heading-link" href="#bugs--concerns">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>New Oracle database features often appear with an entourage of bugs and concerns to be addressed or kept in mind. The incremental statistics gathering feature is not any different.</p>
<ol>
<li>
<p>The implementation in 11.1 is buggy. ORA-1422, as an example, springs to mind during <code>GATHER_DATABASE_STATS</code>; fixed in a subsequent patch [4].</p>
</li>
<li>
<p>Locking statistics for some partitions can cause partitions to be re-gathered and the <code>WRI$_OPTSTAT_SYNOPSIS$</code> table to continue to grow [3].</p>
</li>
<li>
<p>Insufficient partitioning of the <code>WRI$_OPTSTAT_SYNOPSIS$</code> table in 11.1 could cause deletes on the incremental statistics to take hours at end, which could cause the <code>GATHER_DATABASE_JOB</code> to not complete in time during maintenance windows.</p>
</li>
<li>
<p><code>METHOD_OPT</code> is ignored, even when explicitly set on a partitioned table with incremental statistics enabled using <code>DBMS_STATS.SET_TABLE_PREFS</code>; this means that histograms may be gathered depending on data skewing and <code>COL_USAGE$</code> contents on predicates that filter on candidate columns on the table. This behaviour is also alluded to on Oracle Support [2]. What this means is that histograms could cause plan changes on a per-partition basis with incremental statistics enabled - whether good or bad. Whereas <code>METHOD_OPT</code> can be set for tables normally, e.g. for all columns size 1, this is not possible when enabling incremental statistics. However, SQL baselines could be used to control what plans are deemed &ldquo;good&rdquo; against partitioned tables with incremental statistics enabled.</p>
</li>
<li>
<p>Larger SYSAUX in order to store synopsis data. For a 4TB database I noticed that 22GB was used for synopsis data relating to 6 partitioned tables (constituting 75+% of the data in the database) with incremental statistics enabled, equalling a 0.55% overhead. So make sure to size SYSAUX accordingly. It may be worth considering auto extensible SYSAUX data files, at least for the first few runs. I also suspect that space consumption may well increase slightly over the initial 31 day period (the historic statistics retention period) and then stabilise. The reason is that if partition statistics are re-gathered, previous statistics will be stored for historic purposes, which allows for rollback of statistics.</p>
</li>
<li>
<p>Global index statistics for local partitioned indexes still appear to be maintained with a full index scan, i.e. not with local partition statistics. However, local index partition statistics are still gathered on a per-partition basis [1].</p>
</li>
</ol>
<h2 id="final-thoughts">
  Final Thoughts
  <a class="heading-link" href="#final-thoughts">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>I really like the new incremental statistics gathering feature as it resolves statistics gathering issues and resource wastage with large partitioned tables. However, using it in 11.1 is rather buggy and prone to performance issues when it comes to the OPTSTAT tables. I therefore strongly recommend that upgrading to 11.2 be considered if table sizes reach the point where incremental statistics are considered.</p>
<p>Regarding the database I was working on, running <code>GATHER_DATABASE_STATS</code> with the <code>GATHER AUTO</code> option on-and-off at quiet periods of the day over a couple of days quickly managed to catch up on segments that had no or stale statistics; the job can be interrupted without causing loss to statistics already gathered on existing segments.</p>
<h2 id="references">
  References
  <a class="heading-link" href="#references">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>[1] Oracle Database Performance Tuning Guide - 11g Release 2 (11.2). Managing Optimizer Statistics. URL: <a href="http://download.oracle.com/docs/cd/E18283_01/server.112/e16638/stats.htm"  class="external-link" target="_blank" rel="noopener">http://download.oracle.com/docs/cd/E18283_01/server.112/e16638/stats.htm</a></p>
<p>[2] Oracle Support. DBMS_STATS &lsquo;gather auto&rsquo; and &lsquo;gather stale&rsquo; and column histograms [ID 1073120.1]. URL: <a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;doctype=HOWTO&amp;id=1073120.1"  class="external-link" target="_blank" rel="noopener">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;doctype=HOWTO&amp;id=1073120.1</a></p>
<p>[3] Oracle Support. Bug 12369250 - sys.wri$_optstat_synopsis$ growth / all partitions are regathered stats in incremental mode when some partitions are locked [ID 12369250.8]. URL: <a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;doctype=PATCH&amp;id=12369250.8"  class="external-link" target="_blank" rel="noopener">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;doctype=PATCH&amp;id=12369250.8</a></p>
<p>[4] Oracle Support. Patch 8301385: DBMS_STATS ERRORS WITH ORA-01422: EXACT FETCH RETURNS MORE THAN REQUESTED NUMBER. URL: (article not available for ordinary support at 05-OCT-2011)</p>
<p>[5] Oracle Support. Collect statistics for a large partitioned table takes a lot when incremental is used [ID 1302628.1]. URL: <a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;doctype=HOWTO&amp;id=1073120.1"  class="external-link" target="_blank" rel="noopener">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;doctype=HOWTO&amp;id=1073120.1</a></p>
<p>[6] Oracle Support. Relation between Table Monitoring and STATISTICS_LEVEL parameter in 10g [ID 252597.1]. URL: <a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;doctype=BULLETIN&amp;id=252597.1"  class="external-link" target="_blank" rel="noopener">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;doctype=BULLETIN&amp;id=252597.1</a></p>
<hr>
<p><em>Originally published at <a href="https://jensenmo.blogspot.com/2011/10/using-incremental-global-statistics-for.html"  class="external-link" target="_blank" rel="noopener">https://jensenmo.blogspot.com/2011/10/using-incremental-global-statistics-for.html</a></em></p>

      </div>


      <footer>
        


        
        
        
        
        
        
        
      </footer>
    </article>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css"
    integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">
  
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js"
    integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js"
    integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
    onload="renderMathInElement(document.body,
      {
        delimiters: [
          {left: '$$', right: '$$', display:true},
          {left: '$', right: '$', display:false},
          {left: '\\(', right: '\\)', display: false},
          {left: '\\[', right: '\\]', display: true}
        ]
      }
    );"></script>
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    Â©
    
    2025
     Morten Jensen 
    Â·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js" integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
  

  

  


  

  

  <script async defer data-domain="jensenmo.github.io" src="https://plausible.io/js/script.js"></script>


  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>
</html>
